<html>
  <head>
    <title>Plotly Example</title>
    <script
      src="hhttps://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.9/standalone/umd/vis-network.min.js"
      charset="utf-8"
    ></script>
  </head>
  <body>
    <div>
      <pre><code id="out">Loading webR, please wait...</code></pre>
    </div>
    
    <script type="module">
      import { WebR } from 'https://webr.r-wasm.org/latest/webr.mjs';
      const webR = new WebR({ interactive: false });
      await webR.init();
      const outElem = document.getElementById('out');
      outElem.innerText = 'Loading visNetwork, please wait...';
      await webR.installPackages(['jsonlite', 'shiny', 'visNetwork'], true);
      outElem.innerText = 'Generating network, please wait...';
      const netData = await webR.evalRString(`
library(shiny)
library(visNetwork)
options(shiny.trace = TRUE)
runApp('app', display.mode = 'showcase', launch.browser = FALSE)
`);
      outElem.replaceChildren();
      new vis.Network('out', JSON.parse(netData), {});
    </script>
  </body>
</html>
